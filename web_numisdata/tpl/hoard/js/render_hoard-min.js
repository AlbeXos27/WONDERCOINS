"use strict";var render_hoard={caller:null,draw_hoard:async function(e){const t=e.row;if(!t)return a;const n=await this.cargarMonedasHallazgos(t.coins),a=new DocumentFragment,o=common.create_dom_element({element_type:"div",parent:a});if(!0===dedalo_logged){common.create_dom_element({element_type:"a",class_name:"section_id go_to_dedalo",text_content:t.section_id,href:"/dedalo/lib/dedalo/main/?t=numisdata5&id="+t.section_id,parent:o}).setAttribute("target","_blank")}if(t.name&&t.name.length>0){const e=common.create_dom_element({element_type:"div",class_name:"line-tittle-wrap",parent:o});if(common.create_dom_element({element_type:"div",class_name:"line-tittle golden-color",text_content:t.name,parent:e}),t.place&&t.place.length>0){const n="| "+t.place;common.create_dom_element({element_type:"div",class_name:"info_value",text_content:n,parent:e})}}if(t.coins&&t.coins.length>0){const e=t.coins.length;common.create_dom_element({element_type:"div",class_name:"info_text_block",inner_html:(tstring.total_coins||"Total coins")+": "+e,parent:a})}if(t.public_info&&common.create_dom_element({element_type:"div",class_name:"info_text_block",inner_html:t.public_info,parent:a}),t.bibliography_data&&t.bibliography_data.length>0){const e=common.create_dom_element({element_type:"div",class_name:"info_line separator",parent:a});common.create_dom_element({element_type:"label",class_name:"big_label",text_content:tstring.bibliographic_references||"Bibliographic references",parent:e});const n=common.create_dom_element({element_type:"div",class_name:"info_text_block",parent:a}),o=t.bibliography_data,l=o.length;for(let e=0;e<l;e++){const t=biblio_row_fields.render_row_bibliography(o[e]);common.create_dom_element({element_type:"div",class_name:"bibliographic_reference",parent:n}).appendChild(t)}page.create_expandable_block(n,a)}t.link&&common.create_dom_element({element_type:"a",class_name:"icon_link info_value",inner_html:t.link,href:t.link,target:"_blank",parent:a});const l=common.create_dom_element({element_type:"div",class_name:"map_container",parent:a}),m=new map_factory;let _={hallazgos:{datos:[]},cecas:{datos:[]},complejos:{datos:[]}};_.hallazgos.datos.push(t);m.init({map_container:l,map_position:t.map,source_maps:page.maps_config.source_maps,result:_,findspot:!0,unique:!0});const c=common.create_dom_element({element_type:"h2",class_name:"title_info",text_content:"Monedas Encontradas",parent:a});common.create_dom_element({element_type:"div",class_name:"golden-separator",parent:c});for(let e=0;e<n.result.length;e++){const t=common.create_dom_element({element_type:"div",class_name:"coins-container",parent:a}),o=common.create_dom_element({element_type:"div",class_name:"title-container",parent:t}),l=n.result[e]&&n.result[e].type_full_value?n.result[e].type_full_value:"",m=l?l.split("|"):[],_=m.length>0?m[m.length-1].trim():"",c=n.result[e].denomination?n.result[e].denomination+" | "+_.replace(n.result[e].denomination,"").trim():n.result[e].type_full_value,r=c||"Tipo";let s=n.result[e].type_data?n.result[e].type_data.replace('"',"").replace("[","").replace("]","").replace('"',""):0;common.create_dom_element({element_type:"a",class_name:"type_link",href:`/web_numisdata/type/${s}`,text_content:r,parent:o});const i=common.create_dom_element({element_type:"div",class_name:"data-container",parent:t}),p=common.create_dom_element({element_type:"div",class_name:"img-container",parent:i}),d="https://wondercoins.uca.es"+n.result[e].image_obverse,u="https://wondercoins.uca.es"+n.result[e].image_reverse;common.create_dom_element({element_type:"img",class_name:"img_obverse",parent:p,src:d}),common.create_dom_element({element_type:"img",class_name:"img_obverse",parent:p,src:u});const g=common.create_dom_element({element_type:"div",class_name:"info-container",parent:i}),y=n.result[e].date_in,f=n.result[e].date_out,b=!!y,h=!!f,v=b?y.includes("-")?Math.abs(parseInt(y))+" A.C.":y+" D.C.":"N/A",w=h?f.includes("-")?Math.abs(parseInt(f))+" A.C.":f+" D.C.":"N/A",x=b||h?v+" - "+w:"N/A - N/A";common.create_dom_element({element_type:"p",class_name:"date_text",text_content:x,parent:g});const A=n.result[e].weight?n.result[e].weight+" gramos":"N/A";common.create_dom_element({element_type:"p",class_name:"weight_text",text_content:A,parent:g});const k=n.result[e].diameter?n.result[e].diameter+" mm":"N/A";common.create_dom_element({element_type:"p",class_name:"diameter_text",text_content:k,parent:g});const N=n.result[e].collection?n.result[e].collection:"N/A";common.create_dom_element({element_type:"p",class_name:"collection_text",text_content:N,parent:g});const C=common.create_dom_element({element_type:"div",class_name:"findspot_container",parent:t});common.create_dom_element({element_type:"p",class_name:"findspot_text",text_content:n.result[e].findspot.split(" | ")[0],parent:C})}return a},draw_types_list_node:function(e){const t=e.response;return map.render_types_list({global_data_item:t.global_data_item,types_rows:t.types_rows,coins_rows:t.coins_rows,info:t.info})},cargarMonedasHallazgos:async function(e){try{const t=Array.isArray(e)?`section_id IN (${e.join(",")})`:`section_id = ${e}`;return await data_manager.request({body:{dedalo_get:"records",table:"coins",ar_fields:["*"],sql_filter:t,limit:0,count:!0,offset:0,order:"section_id ASC",process_result:null}})}catch(e){}}};