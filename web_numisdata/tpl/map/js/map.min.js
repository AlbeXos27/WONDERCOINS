"use strict";var map={form_container:null,rows_container:null,map_container:null,map_container_numismatic_group:null,export_data_container:null,map_factory_instance:null,map_factory_instance_numismatic_group:null,master_map_global_data:null,current_map_global_data:null,global_data:null,map_global_data:null,form:null,forn_node:null,map_config:null,button_state:!1,WEB_ROOT_WEB:"/web_numisdata",set_up:function(options){SHOW_DEBUG;const self=this;self.form_container=options.form_container,self.map_container=options.map_container,self.rows_container=options.rows_container,self.export_data_container=options.export_data_container,self.map_container_numismatic_group=options.map_container_numismatic_group;const export_data_buttons=page.render_export_data_buttons();self.export_data_container.appendChild(export_data_buttons),self.export_data_container.classList.add("hide");let resultado={hallazgos:{datos:[]},cecas:{datos:[]},complejos:{datos:[]}};this.cargarTodoYCrearMapa(resultado,""),self.form=new form_factory;const form_node=self.render_form();self.form_container.appendChild(form_node),self.set_config();const show_search_button=document.getElementById("search_icon");return show_search_button.addEventListener("mousedown",(function(){let new_showing_search;!0===self.map_config.showing_search?(form_node.classList.add("hide"),new_showing_search=!1):(form_node.classList.remove("hide"),new_showing_search=!0),self.set_config({showing_search:new_showing_search})})),!0===self.map_config.showing_search?form_node.classList.remove("hide"):form_node.classList.add("hide"),!0},cargarTodoYCrearMapa:async function(resultado,sql_filter,location){const self=this;try{const hallazgos=await data_manager.request({body:{dedalo_get:"records",table:"findspots",ar_fields:["*"],sql_filter:""==sql_filter?'typology != ""':sql_filter+' AND typology != ""',limit:0,count:!0,offset:0,order:"section_id ASC",process_result:null}});resultado.hallazgos.datos=hallazgos.result;const cecas=await data_manager.request({body:{dedalo_get:"records",table:"mints",ar_fields:["*"],sql_filter:sql_filter,limit:0,count:!0,offset:0,order:"name",process_result:null}});resultado.cecas.datos=cecas.result;const complejos=await data_manager.request({body:{dedalo_get:"records",table:"hoards",ar_fields:["*"],sql_filter:sql_filter,limit:0,count:!0,offset:0,order:"name",process_result:null}});resultado.complejos.datos=complejos.result,self.map_factory_instance=new map_factory,self.map_factory_instance.init({map_container:self.map_container,map_position:location?[location.lat,location.lon]:[36.5297,-6.2924],source_maps:page.maps_config.source_maps,result:resultado,map_node:this,DEV_MODE:!0})}catch(error){console.error("Error cargando datos:",error)}},set_config:function(options){const self=this,map_config=localStorage.getItem("map_config");if(map_config)self.map_config=JSON.parse(map_config);else{const map_config={showing_search:!1};localStorage.setItem("map_config",JSON.stringify(map_config)),self.map_config=map_config}if(options){for(const key in options)self.map_config[key]=options[key];localStorage.setItem("map_config",JSON.stringify(self.map_config))}return self.map_config},render_form:function(){const self=this,fragment=new DocumentFragment,form_row=common.create_dom_element({element_type:"div",class_name:"form-row fields",parent:fragment});common.create_dom_element({element_type:"div",class_name:"golden-separator",parent:form_row}),self.form.item_factory({id:"mint",name:"mint",label:tstring.mint||"mint",q_column:"name",value_wrapper:['["','"]'],sql_filter:" name LIKE '%%' AND name !='' ",is_term:!0,q_selected_eq:"LIKE",parent:form_row,callback:function(form_item){self.form.activate_autocomplete({form_item:form_item,table:"mints",activate_filter:!1})}}),self.form.item_factory({id:"findspot",name:"findspot",label:tstring.findspot||"findspot",q_column:"name",sql_filter:" name LIKE '%%' AND name !='' ",q_selected_eq:"LIKE",parent:form_row,callback:function(form_item){self.form.activate_autocomplete({form_item:form_item,table:"findspots",parent_in:!0,activate_filter:!1})}}),self.form.item_factory({id:"hoard",name:"hoard",label:tstring.hoard||"hoard",q_column:"name",value_wrapper:['["','"]'],sql_filter:" name LIKE '%%' AND name !='' ",q_selected_eq:"LIKE",parent:form_row,callback:function(form_item){self.form.activate_autocomplete({form_item:form_item,table:"hoards",parent_in:!0,activate_filter:!1})}}),self.form.item_factory({id:"catalog",name:"catalog",label:"Grupo Numismatico",q_column:"term",value_wrapper:['["','"]'],sql_filter:" term LIKE '%%' AND term !='' ",q_selected_eq:"LIKE",parent:form_row,callback:function(form_item){self.form.activate_autocomplete({form_item:form_item,table:"catalog",id:!1,activate_filter:!1})}}),self.observeAllContainers(form_row,self,1);const submit_group=common.create_dom_element({element_type:"div",class_name:"form-group field button_submit",parent:fragment}),submit_button=common.create_dom_element({element_type:"input",type:"submit",id:"submit",value:tstring.search||"Search",class_name:"btn btn-light btn-block primary",parent:submit_group});submit_button.addEventListener("click",(function(e){e.preventDefault(),self.form_submit()}));const operators_node=self.form.build_operators_node();return fragment.appendChild(operators_node),self.form.node=common.create_dom_element({element_type:"form",id:"search_form",class_name:"form-inline form_factory"}),self.form.node.appendChild(fragment),self.form.node},observeAllContainers:function(form_row,self,id){let observers=[];const connectToContainer=container=>{const obs=new MutationObserver(async mutationsList=>{for(let mutation of mutationsList)if("childList"===mutation.type)if(container.children.length>0){const lastValueLabel=container.lastElementChild.querySelector(".value_label").textContent;await data_manager.request({body:{dedalo_get:"records",table:"catalog",ar_fields:["*"],sql_filter:`term LIKE "%${lastValueLabel}%"`,limit:0}}).then(api_response=>{null!=api_response.result[0].children&&(self.form.item_factory({id:"catalog"+id,name:"catalog"+id,label:lastValueLabel,q_column:"term",value_wrapper:['["','"]'],sql_filter:" term LIKE '%%' AND term !='' ",q_selected_eq:"LIKE",parent:form_row,callback:function(form_item){self.form.activate_autocomplete({form_item:form_item,table:"catalog",id:!0,label:lastValueLabel})}}),id++)})}else{let next=container.parentNode.nextElementSibling;for(;next;){let toRemove=next;next=next.nextElementSibling,toRemove.remove(),id--}}});obs.observe(container,{childList:!0}),observers.push(obs)},parentObserver=new MutationObserver(()=>{const containers=form_row.querySelectorAll(".container_values");observers.forEach(o=>o.disconnect()),observers=[],containers.forEach(container=>{container.previousElementSibling.id&&container.previousElementSibling.id.includes("catalog")&&connectToContainer(container)})});parentObserver.observe(form_row,{childList:!0}),form_row.querySelectorAll(".container_values").forEach(container=>{container.previousElementSibling.id&&container.previousElementSibling.id.includes("catalog")&&connectToContainer(container)})},form_submit:function(){const self=this,form_node=self.form.node;if(!form_node)return new Promise((function(resolve){console.error("Error on submit. Invalid form_node.",form_node),resolve(!1)}));for(;self.rows_container.hasChildNodes();)self.rows_container.removeChild(self.rows_container.lastChild);return new Promise((function(resolve){const ar_fields=["*"],filter=self.form.build_filter(),group=[],parsed_filter=self.form.parse_sql_filter(filter,group,!1),sql_filter=parsed_filter?"("+parsed_filter+")":null;SHOW_DEBUG;let table=null,q="",q_selected="",label="name",tam_form_items=Object.keys(self.form.form_items).filter(k=>k.startsWith("catalog")&&self.form.form_items[k].q_selected.length>0||""!==self.form.form_items.mint.q);console.log(self.form.form_items),""!==self.form.form_items.mint.q||self.form.form_items.mint.q_selected.length>0?(table="mints",q=self.form.form_items.mint.q,q_selected=self.form.form_items.mint.q_selected):""!==self.form.form_items.findspot.q||self.form.form_items.findspot.q_selected.length>0?(table="findspots",q=self.form.form_items.findspot.q,q_selected=self.form.form_items.findspot.q_selected):""!==self.form.form_items.hoard.q||self.form.form_items.hoard.q_selected.length>0?(table="hoards",q=self.form.form_items.hoard.q,q_selected=self.form.form_items.hoard.q_selected):(""!==self.form.form_items.catalog.q||self.form.form_items.catalog.q_selected.length>0)&&(table="catalog",q=self.form.form_items[tam_form_items[tam_form_items.length-1]].q,q_selected=self.form.form_items[tam_form_items[tam_form_items.length-1]].q_selected,label="parents_text");let sql_filter_final=` ${label} LIKE '%${""!==q?q:q_selected}%' AND ${label} !=''`,resultado={hallazgos:{datos:[]},cecas:{datos:[]},complejos:{datos:[]}};table?data_manager.request({body:{dedalo_get:"records",table:table,ar_fields:ar_fields,sql_filter:"catalog"!=table?sql_filter_final:sql_filter_final+" AND coin_references != '' ",limit:0,count:!0,offset:0,order:"section_id ASC",process_result:null}}).then((async function(api_response){const location={lon:null,lat:null};if(api_response.result){if("catalog"==table){const set_monedas=new Set;for(let index=0;index<api_response.result.length;index++){const coins=JSON.parse(api_response.result[index].coin_references);for(let coin=0;coin<coins.length;coin++)set_monedas.add(coins[coin])}let filtro="";const valores=Array.from(set_monedas);for(let index=0;index<valores.length;index++)filtro+=(0!==index?" OR ":"")+` section_id = ${valores[index]}`;const elementosgruponumismatico=await self.cargarElementosGrupoNumismatico(filtro);resultado.cecas.datos=elementosgruponumismatico[0],resultado.hallazgos.datos=elementosgruponumismatico[1];let data_ceca_lat=0,data_ceca_lon=0;for(let index=0;index<resultado.cecas.datos.length;index++){const data_ceca=JSON.parse(resultado.cecas.datos[index].map);data_ceca&&"object"==typeof data_ceca&&(console.log(data_ceca.lat,data_ceca.lon),null!=data_ceca.lat&&null!=data_ceca.lon&&(data_ceca_lat+=data_ceca.lat,data_ceca_lon+=data_ceca.lon))}data_ceca_lat/=resultado.cecas.datos.length,data_ceca_lon/=resultado.cecas.datos.length,document.getElementById("map_container_numismatic_group").hasChildNodes()&&(document.getElementById("map_container_numismatic_group").innerHTML=""),self.map_factory_instance_numismatic_group&&self.map_factory_instance_numismatic_group.map.remove(),self.map_factory_instance_numismatic_group=new map_factory,self.map_factory_instance_numismatic_group.init({map_container:self.map_container_numismatic_group,map_position:[data_ceca_lat,data_ceca_lon],source_maps:page.maps_config.source_maps,result:resultado,map_node:self,zoom:6,DEV_MODE:!0}),self.map_container_numismatic_group.style.display="block",self.map_container.style.display="none",self.map_container_numismatic_group.classList.remove("loading")}else{const datos_location=JSON.parse(api_response.result[0].map);if(location.lat=datos_location.lat,location.lon=datos_location.lon,"mints"==api_response.result[0].table){const monedas_cecas=await self.cargarMonedasCecas(api_response.result[0].name);await self.render_rows(api_response.result[0],monedas_cecas.result)}if("findspots"==api_response.result[0].table){const monedas_hallazgos=await self.cargarMonedasHallazgos(api_response.result[0].name);await self.render_rows(api_response.result[0],monedas_hallazgos.result)}if("hoards"==api_response.result[0].table){const monedas_complejos=await self.cargarMonedasComplejos(api_response.result[0].name);await self.render_rows(api_response.result[0],monedas_complejos.result)}self.map_factory_instance&&self.map_factory_instance.map.remove(),self.cargarTodoYCrearMapa(resultado,sql_filter_final,location),self.map_container.style.display="block",self.map_container_numismatic_group.style.display="none"}self.map_container.classList.remove("loading")}resolve(!0)})):(self.map_factory_instance&&self.map_factory_instance.map.remove(),self.cargarTodoYCrearMapa(resultado,"",null),self.map_container.style.display="block",self.map_container_numismatic_group.style.display="none")}))},cargarMonedasCecas:async function(ceca){try{const monedas=await data_manager.request({body:{dedalo_get:"records",table:"coins",ar_fields:["*"],sql_filter:`mint_name LIKE '%${ceca}%'`,limit:15,count:!0,offset:0,order:"section_id ASC",process_result:null}});return monedas}catch(error){console.error("Error cargando datos:",error)}},cargarElementosGrupoNumismatico:async function(sql_filter){try{const monedas_filtradas=await data_manager.request({body:{dedalo_get:"records",table:"coins",ar_fields:["mint_data","findspot_data"],sql_filter:sql_filter,limit:0,count:!0,offset:0,order:"section_id ASC",process_result:null}});let filtro_cecas="";const set_cecas=new Set;let filtro_hallazgos="";const set_hallazgos=new Set;for(let index=0;index<monedas_filtradas.result.length;index++){let array_aux;monedas_filtradas.result[index].mint_data.split(" | ").forEach(item=>{if((item=item.trim()).startsWith("[")){const parsed=JSON.parse(item);parsed.forEach(val=>set_cecas.add(val))}else set_cecas.add(item)});const hallazgo=JSON.parse(monedas_filtradas.result[index].findspot_data);Array.isArray(hallazgo)&&null!=hallazgo?hallazgo.forEach(val=>set_hallazgos.add(val)):set_hallazgos.add(hallazgo)}set_cecas.delete(null),set_hallazgos.delete(null);const array_cecas=Array.from(set_cecas),array_hallazgos=Array.from(set_hallazgos);let filtro="";for(let index=0;index<array_cecas.length;index++)filtro+=(0!==index?" OR ":"")+` section_id = ${array_cecas[index]}`;const cecas_filtradas=await data_manager.request({body:{dedalo_get:"records",table:"mints",ar_fields:["*"],sql_filter:filtro+" AND map IS NOT NULL",limit:0,count:!0,offset:0,order:"section_id ASC",process_result:null}});filtro="";for(let index=0;index<array_hallazgos.length;index++)filtro+=(0!==index?" OR ":"")+` section_id = ${array_hallazgos[index]}`;const hallazgos_filtradas=await data_manager.request({body:{dedalo_get:"records",table:"findspots",ar_fields:["*"],sql_filter:filtro+" AND map IS NOT NULL",limit:0,count:!0,offset:0,order:"section_id ASC",process_result:null}});return[cecas_filtradas.result,hallazgos_filtradas.result]}catch(error){console.error("Error cargando datos:",error)}},cargarMonedasHallazgos:async function(ceca){try{const monedas=await data_manager.request({body:{dedalo_get:"records",table:"coins",ar_fields:["*"],sql_filter:`findspot LIKE '%${ceca}%'`,limit:15,count:!0,offset:0,order:"section_id ASC",process_result:null}});return monedas}catch(error){console.error("Error cargando datos:",error)}},cargarMonedasComplejos:async function(complejo){try{const monedas=await data_manager.request({body:{dedalo_get:"records",table:"coins",ar_fields:["*"],sql_filter:`hoard LIKE '%${complejo}%'`,limit:15,count:!0,offset:0,order:"section_id ASC",process_result:null}});return monedas}catch(error){console.error("Error cargando datos:",error)}},cargarHijosHallazgos:async function(hallazgo){try{const hijos=await data_manager.request({body:{dedalo_get:"records",table:"findspots",ar_fields:["*"],sql_filter:`parents LIKE '%"${hallazgo}"%'`,limit:0,count:!0,offset:0,order:"section_id ASC",process_result:null}});return hijos}catch(error){console.error("Error cargando datos:",error)}},createfindspot_Tree:async function(findspot){const findspots_tree=[],findspot_sons=await this.cargarHijosHallazgos(findspot.section_id);findspots_tree.push({info_nodo:findspot,padre:null});for(let index=0;index<findspot_sons.result.length;index++){const parent_node=JSON.parse(findspot_sons.result[index].parents);findspots_tree.push({info_nodo:findspot_sons.result[index],padre:parent_node[0]})}return findspots_tree},generate_Tree:async function(tree,node,node_parent,padding,font_Size){const info_node=common.create_dom_element({element_type:"div",class_name:"container_prueba",parent:node_parent}),link_node=common.create_dom_element({element_type:"a",class_name:"info_link",text_content:node.info_nodo.name,href:this.WEB_ROOT_WEB+`/findspot/${node.info_nodo.section_id}`,parent:info_node}),font_size=1.5;if(info_node.style.paddingLeft=`${padding}em`,link_node.style.fontSize="1.5rem",link_node.style.textTransform="uppercase",link_node.style.fontWeight="bold",null!=node.info_nodo.coins){const coins=await this.cargarMonedasHallazgos(node.info_nodo.name),container_rows=common.create_dom_element({element_type:"div",class_name:"container_rows",parent:info_node});container_rows.style.paddingLeft="1em",this.generate_rows_findspot(container_rows,coins.result)}if(null!=node.info_nodo.children)for(let index=0;index<tree.length;index++)tree[index].info_nodo.parent=='["'+node.info_nodo.section_id+'"]'&&(tree[index].padre="'"+node.info_nodo.section_id+"'",await this.generate_Tree(tree,tree[index],info_node,1.5,1.3))},generate_rows_findspot:function(parent,coins){for(let index=0;index<coins.length;index++){const info_coin=common.create_dom_element({element_type:"div",class_name:"info_coin",parent:parent}),container_images=common.create_dom_element({element_type:"div",class_name:"container_images",parent:info_coin}),parsedCoinData=coins[index],image_obverse="https://wondercoins.uca.es"+(null!=parsedCoinData.image_obverse?parsedCoinData.image_obverse:"/dedalo/media/image/1.5MB/20000/rsc29_rsc170_20917.jpg");common.create_dom_element({element_type:"img",class_name:"img_observe",src:image_obverse,parent:container_images});const image_reverse="https://wondercoins.uca.es"+(null!=parsedCoinData.image_obverse?parsedCoinData.image_obverse:"/dedalo/media/image/1.5MB/20000/rsc29_rsc170_20917.jpg");common.create_dom_element({element_type:"img",class_name:"img_reserve",src:image_reverse,parent:container_images});const container_data=common.create_dom_element({element_type:"div",class_name:"container_data",parent:info_coin});let weight_text=null;weight_text=null!=coins[index].weight?"Peso: "+coins[index].weight+"g":"Peso: N/A";const weight=common.create_dom_element({element_type:"span",class_name:"weight",text_content:weight_text,parent:container_data}),diameter=common.create_dom_element({element_type:"span",class_name:"diameter",text_content:"Módulo: "+coins[index].diameter+"mm",parent:container_data}),catalogue_type=common.create_dom_element({element_type:"span",class_name:"catalogue_type",text_content:"Colección: "+coins[index].collection,parent:container_data});let findspot_text=coins[index].findspot.split(" | ")[0];const findspot=common.create_dom_element({element_type:"span",class_name:"findspot",text_content:"Hallazgo: "+findspot_text,parent:info_coin}),tipo=common.create_dom_element({element_type:"span",class_name:"type",text_content:"Tipo: "+coins[index].type_full_value,parent:info_coin}),container_links=common.create_dom_element({element_type:"div",class_name:"container_links",parent:info_coin}),type_link=common.create_dom_element({element_type:"a",class_name:"type_link",href:this.WEB_ROOT_WEB+"/type/"+coins[index].type,text_content:"TIPO",parent:container_links})}},render_rows:async function(row,coins){"mints"===row.table?await this.render_rows_cecas(row,coins):"findspots"===row.table?await this.render_rows_hallazgo(row,coins):await this.render_rows_complejos(row,coins)},render_rows_hallazgo:async function(row){const self=this,fragment=new DocumentFragment;let text_content=null,separador=null;text_content="Hallazgo : "+row.name,separador="-";const container_titulo=common.create_dom_element({element_type:"div",class_name:"container_title",parent:fragment}),titulo=common.create_dom_element({element_type:"div",class_name:"line-tittle green-color",text_content:text_content,parent:container_titulo}),imagen=common.create_dom_element({element_type:"img",class_name:"imagen",src:"tpl/assets/images/arrow-right.svg",parent:container_titulo}),separator=common.create_dom_element({element_type:"div",class_name:"golden-separator",parent:fragment});let text_road="";if(row.parents_text)for(let index=0;index<JSON.parse(row.parents_text).length-1;index++)index<JSON.parse(row.parents_text).length-2?text_road+=JSON.parse(row.parents_text)[index]+",":text_road+=JSON.parse(row.parents_text)[index];const road=common.create_dom_element({element_type:"div",class_name:"line-tittle mid",text_content:""!=text_road?text_road.replace(/,/g," - "):row.name,parent:fragment}),findspot_tree=await this.createfindspot_Tree(row);await this.generate_Tree(findspot_tree,findspot_tree[0],fragment,0),road.style.display="none",imagen.addEventListener("mousedown",(function(){self.button_state?(imagen.style.transform="rotate(0deg) translateY(0.75vh)",road.style.display="none"):(imagen.style.transform="rotate(90deg) translateX(0.75vh)",road.style.display="block"),self.button_state=!self.button_state})),self.rows_container.appendChild(fragment)},render_rows_cecas:async function(row,coins){const self=this,fragment=new DocumentFragment;let text_content=null,separador=null;text_content="Ceca : ",separador=",";const container_titulo=common.create_dom_element({element_type:"div",class_name:"container_title",parent:fragment}),titulo=common.create_dom_element({element_type:"div",class_name:"line-tittle green-color",text_content:"Ceca : ",parent:container_titulo}),link=common.create_dom_element({element_type:"a",class_name:"link_ceca",href:this.WEB_ROOT_WEB+"/mint/"+row.section_id,text_content:row.name,parent:container_titulo}),imagen=common.create_dom_element({element_type:"img",class_name:"imagen",src:"tpl/assets/images/arrow-right.svg",parent:container_titulo}),separator=common.create_dom_element({element_type:"div",class_name:"golden-separator",parent:fragment}),road=common.create_dom_element({element_type:"div",class_name:"line-tittle mid",text_content:row.place.split(",")[0],parent:fragment}),container_text_rows=common.create_dom_element({element_type:"div",class_name:"container_text_rows",parent:fragment}),title_text_rows=common.create_dom_element({element_type:"div",class_name:"title_text_rows",text_content:"Monedas("+coins.length+")",parent:container_text_rows}),imagen_flecha_monedas=common.create_dom_element({element_type:"img",class_name:"imagen_text_rows",src:"tpl/assets/images/arrow-right.svg",parent:container_text_rows}),container_rows=common.create_dom_element({element_type:"div",class_name:"container_rows",parent:fragment});for(let index=0;index<coins.length;index++){const info_coin=common.create_dom_element({element_type:"div",class_name:"info_coin",parent:container_rows}),container_images=common.create_dom_element({element_type:"div",class_name:"container_images",parent:info_coin}),parsedCoinData=coins[index],image_obverse="https://wondercoins.uca.es"+(null!=parsedCoinData.image_obverse?parsedCoinData.image_obverse:"/dedalo/media/image/1.5MB/20000/rsc29_rsc170_20917.jpg");common.create_dom_element({element_type:"img",class_name:"img_observe",src:image_obverse,parent:container_images});const image_reverse="https://wondercoins.uca.es"+(null!=parsedCoinData.image_obverse?parsedCoinData.image_obverse:"/dedalo/media/image/1.5MB/20000/rsc29_rsc170_20917.jpg");common.create_dom_element({element_type:"img",class_name:"img_reserve",src:image_reverse,parent:container_images});const container_data=common.create_dom_element({element_type:"div",class_name:"container_data",parent:info_coin});let weight_text=null;weight_text=null!=coins[index].weight?"Peso: "+coins[index].weight+"g":"Peso: N/A";const weight=common.create_dom_element({element_type:"span",class_name:"weight",text_content:weight_text,parent:container_data}),diameter=common.create_dom_element({element_type:"span",class_name:"diameter",text_content:"Módulo: "+coins[index].diameter+"mm",parent:container_data}),catalogue_type=common.create_dom_element({element_type:"span",class_name:"catalogue_type",text_content:"Colección: "+coins[index].collection,parent:container_data});let findspot_text=coins[index].findspot.split(" | ")[0];const findspot=common.create_dom_element({element_type:"span",class_name:"findspot",text_content:"Hallazgo: "+findspot_text,parent:info_coin}),tipo=common.create_dom_element({element_type:"span",class_name:"type",text_content:"Tipo: "+coins[index].type_full_value,parent:info_coin}),container_links=common.create_dom_element({element_type:"div",class_name:"container_links",parent:info_coin});let value,coin_type=coins[index].type_data?coins[index].type_data.replace('"',"").replace("[","").replace("]","").replace('"',""):0;const type_link=common.create_dom_element({element_type:"a",class_name:"type_link",href:this.WEB_ROOT_WEB+"/type/"+coin_type,text_content:"TIPO",parent:container_links})}road.style.display="none",container_rows.style.display="none";let container_rows_state=!1;imagen.addEventListener("mousedown",(function(){self.button_state?(imagen.style.transform="rotate(0deg) translateY(0.75vh)",road.style.display="none"):(imagen.style.transform="rotate(90deg) translateX(0.75vh)",road.style.display="block"),self.button_state=!self.button_state})),imagen_flecha_monedas.addEventListener("mousedown",(function(){container_rows_state?(imagen_flecha_monedas.style.transform="rotate(0deg) translateY(0.60vh)",container_rows.style.display="none"):(imagen_flecha_monedas.style.transform="rotate(90deg) translateX(0.60vh)",container_rows.style.display="grid"),container_rows_state=!container_rows_state})),self.rows_container.appendChild(fragment)},render_rows_complejos:async function(row,coins){const self=this,fragment=new DocumentFragment;let text_content=null,separador=null;text_content="Complejo : "+row.name,separador="-";const container_titulo=common.create_dom_element({element_type:"div",class_name:"container_title",parent:fragment}),titulo=common.create_dom_element({element_type:"div",class_name:"line-tittle green-color",text_content:text_content,parent:container_titulo}),imagen=common.create_dom_element({element_type:"img",class_name:"imagen",src:"tpl/assets/images/arrow-right.svg",parent:container_titulo}),separator=common.create_dom_element({element_type:"div",class_name:"golden-separator",parent:fragment}),road=common.create_dom_element({element_type:"div",class_name:"line-tittle mid",text_content:row.place.replace(/,/g," - "),parent:fragment}),container_text_rows=common.create_dom_element({element_type:"div",class_name:"container_text_rows",parent:fragment}),title_text_rows=common.create_dom_element({element_type:"div",class_name:"title_text_rows",text_content:"Monedas("+coins.length+")",parent:container_text_rows}),imagen_flecha_monedas=common.create_dom_element({element_type:"img",class_name:"imagen_text_rows",src:"tpl/assets/images/arrow-right.svg",parent:container_text_rows}),container_rows=common.create_dom_element({element_type:"div",class_name:"container_rows",parent:fragment});for(let index=0;index<coins.length;index++){const info_coin=common.create_dom_element({element_type:"div",class_name:"info_coin",parent:container_rows}),container_images=common.create_dom_element({element_type:"div",class_name:"container_images",parent:info_coin}),parsedCoinData=coins[index],image_obverse="https://wondercoins.uca.es"+(null!=parsedCoinData.image_obverse?parsedCoinData.image_obverse:"/dedalo/media/image/1.5MB/20000/rsc29_rsc170_20917.jpg");common.create_dom_element({element_type:"img",class_name:"img_observe",src:image_obverse,parent:container_images});const image_reverse="https://wondercoins.uca.es"+(null!=parsedCoinData.image_obverse?parsedCoinData.image_obverse:"/dedalo/media/image/1.5MB/20000/rsc29_rsc170_20917.jpg");common.create_dom_element({element_type:"img",class_name:"img_reserve",src:image_reverse,parent:container_images});const container_data=common.create_dom_element({element_type:"div",class_name:"container_data",parent:info_coin});let weight_text=null;weight_text=null!=coins[index].weight?"Peso: "+coins[index].weight+"g":"Peso: N/A";const weight=common.create_dom_element({element_type:"span",class_name:"weight",text_content:weight_text,parent:container_data}),diameter=common.create_dom_element({element_type:"span",class_name:"diameter",text_content:"Módulo: "+coins[index].diameter+"mm",parent:container_data}),catalogue_type=common.create_dom_element({element_type:"span",class_name:"catalogue_type",text_content:"Colección: "+coins[index].collection,parent:container_data});let findspot_text=coins[index].findspot.split(" | ")[0];const findspot=common.create_dom_element({element_type:"span",class_name:"findspot",text_content:"Hallazgo: "+findspot_text,parent:info_coin}),tipo=common.create_dom_element({element_type:"span",class_name:"type",text_content:"Tipo: "+coins[index].type_full_value,parent:info_coin}),container_links=common.create_dom_element({element_type:"div",class_name:"container_links",parent:info_coin});let value,coin_type=coins[index].type_data?coins[index].type_data.replace('"',"").replace("[","").replace("]","").replace('"',""):0;const type_link=common.create_dom_element({element_type:"a",class_name:"type_link",href:this.WEB_ROOT_WEB+"/type/"+coin_type,text_content:"TIPO",parent:container_links})}road.style.display="none",container_rows.style.display="none";let container_rows_state=!1;imagen.addEventListener("mousedown",(function(){self.button_state?(imagen.style.transform="rotate(0deg) translateY(0.75vh)",road.style.display="none"):(imagen.style.transform="rotate(90deg) translateX(0.75vh)",road.style.display="block"),self.button_state=!self.button_state})),imagen_flecha_monedas.addEventListener("mousedown",(function(){container_rows_state?(imagen_flecha_monedas.style.transform="rotate(0deg) translateY(0.60vh)",container_rows.style.display="none"):(imagen_flecha_monedas.style.transform="rotate(90deg) translateX(0.60vh)",container_rows.style.display="grid"),container_rows_state=!container_rows_state})),self.rows_container.appendChild(fragment)}};